# 系统测试指南 v1.1

## 🐛 Bug修复验证

### 测试1: 学生选择课题功能

**测试步骤**:
1. 使用 `student2 / 123456` 登录（student1已选题）
2. 点击左侧菜单"浏览课题"
3. 查看课题列表，所有已通过审核的课题应该可见
4. 点击任意课题的"选择此课题"按钮
5. 确认对话框，点击"确定"

**预期结果**:
- ✅ 可以成功选择课题
- ✅ 显示"选题成功，等待教师确认"消息
- ✅ 自动跳转到"我的选题"页面
- ✅ 其他课题的按钮变为灰色"您已选择其他课题"

**Bug修复内容**:
- 修复了路由冲突问题
- 修复了异步状态判断错误

---

### 测试2: 学生取消选题

**测试步骤**:
1. 在"我的选题"页面
2. 查看选题状态为"待教师确认"
3. 点击"取消选题"按钮
4. 确认对话框

**预期结果**:
- ✅ 成功取消选题
- ✅ 可以重新选择其他课题

**Bug修复内容**:
- 修复了DELETE路由路径错误

---

### 测试3: 教师剔除学生

**测试步骤**:
1. 使用 `teacher1 / 123456` 登录
2. 点击"学生管理"
3. 查看预选学生列表
4. 点击某个学生的"剔除"按钮

**预期结果**:
- ✅ 成功剔除学生
- ✅ 学生可以重新选题

**Bug修复内容**:
- 修复了DELETE路由冲突

---

## 🎨 UI优化验证

### 测试4: 侧边栏布局

**测试步骤**:
1. 登录任意角色账号
2. 查看页面布局

**预期效果**:
- ✅ 左侧250px固定宽度侧边栏
  - 深色背景（#2c3e50）
  - 系统标题
  - 角色标识（学生端/教师端/主任端）
  - 功能菜单（当前页面高亮）
  - 底部用户信息和退出按钮
- ✅ 右侧主内容区
  - 顶部栏显示页面标题
  - 白色卡片展示内容
- ✅ 菜单hover效果（悬停时背景变色，左缩进增加）

---

### 测试5: 完整业务流程

**完整流程测试**:

#### 步骤1: 教师提交课题
```
账号: teacher2 / 123456
操作: 我的课题 → 添加课题 → 填写信息 → 提交
验证: 课题状态为"待审核"
```

#### 步骤2: 主任审核课题
```
账号: admin / admin123
操作: 课题审核 → 找到新课题 → 点击"通过"
验证: 课题状态变为"已通过"
```

#### 步骤3: 学生选择课题
```
账号: student3 / 123456
操作: 浏览课题 → 选择刚才通过的课题
验证: 选题成功，状态为"待确认"
```

#### 步骤4: 教师确认学生
```
账号: teacher2 / 123456
操作: 学生管理 → 找到student3 → 点击"确认"
验证: 学生状态变为"已确认"
```

#### 步骤5: 查看统计
```
账号: admin / admin123
操作: 统计报表 → 查看各项统计数据
验证: 数据正确更新
```

---

## 🔧 Session修复验证

### 测试6: 登录Session

**测试步骤**:
1. 清除浏览器cookie
2. 登录任意账号
3. 刷新页面
4. 执行任意操作
5. 退出登录

**预期结果**:
- ✅ 登录成功，不再出现500错误
- ✅ 刷新页面保持登录状态
- ✅ 操作正常，无Session相关错误
- ✅ 退出后跳转到登录页

**Bug修复内容**:
- 移除了Flask-Session
- 使用Flask内置加密cookie

---

## 📊 统计功能测试

### 测试7: 课题统计

**测试步骤**:
1. 使用 `admin / admin123` 登录
2. 点击"统计报表"
3. 查看课题统计卡片

**验证数据**:
- ✅ 课题总数
- ✅ 已通过数量
- ✅ 待审核数量
- ✅ 已驳回数量
- ✅ 教师课题统计表

### 测试8: 选题统计

**测试步骤**:
1. 在统计报表页面
2. 向下滚动查看选题统计

**验证数据**:
- ✅ 学生总数
- ✅ 已确认选题数
- ✅ 未选题数
- ✅ 课题选择情况表
- ✅ 未选题学生列表

---

## ⚠️ 常见问题排查

### 问题1: 样式没有更新
**解决**: 按 `Ctrl+F5` 强制刷新浏览器

### 问题2: 登录后还是出现500错误
**解决**: 
1. 停止Flask应用
2. 删除 `flask_session/` 目录（如果存在）
3. 清除浏览器cookie
4. 重新启动应用

### 问题3: 学生还是无法选题
**解决**:
1. 确保课题已被主任审核通过
2. 确保课题人数未满
3. 确保学生没有选过其他课题
4. 检查浏览器控制台是否有JavaScript错误

### 问题4: 侧边栏显示异常
**解决**:
1. 确保 `/css/custom.css` 文件已更新
2. 强制刷新浏览器（Ctrl+F5）
3. 检查浏览器窗口宽度（最小768px）

---

## ✅ 测试检查清单

- [ ] 学生可以浏览课题
- [ ] 学生可以选择课题
- [ ] 学生可以取消待确认的选题
- [ ] 学生无法重复选题
- [ ] 教师可以提交课题
- [ ] 教师可以编辑未审核的课题
- [ ] 教师可以删除未选的课题
- [ ] 教师可以查看预选学生
- [ ] 教师可以确认学生
- [ ] 教师可以拒绝学生
- [ ] 教师可以剔除学生
- [ ] 主任可以审核课题
- [ ] 主任只能审核本教研室课题
- [ ] 主任可以查看统计报表
- [ ] 侧边栏布局正常显示
- [ ] 菜单项正确高亮
- [ ] 登录/登出功能正常
- [ ] Session保持正常
- [ ] 权限控制正确

---

## 📝 测试报告模板

```
测试日期: ________
测试人员: ________
浏览器: ________

测试结果:
[ ] 通过所有测试
[ ] 部分测试失败

失败的测试项:
1. ________________
2. ________________

其他问题:
____________________
____________________
```

---

更新时间: 2025-12-10
版本: 1.1

