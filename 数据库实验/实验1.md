~~~sql
-- 创建School数据库（如果不存在）
CREATE DATABASE IF NOT EXISTS School;

-- 使用School数据库
USE School;

-- 创建student表
CREATE TABLE IF NOT EXISTS student (
    sno CHAR(8) PRIMARY KEY COMMENT '学号，主键',
    sname VARCHAR(8) NOT NULL COMMENT '姓名',
    ssex CHAR(2) CHECK (ssex IN ('男', '女')) COMMENT '性别，只能是男或女',
    sdept VARCHAR(20) COMMENT '系别',
    sage INT CHECK (sage > 0 AND sage < 100) COMMENT '年龄，必须大于0小于100'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='学生表';

-- 创建course表
CREATE TABLE IF NOT EXISTS course (
    cno CHAR(3) PRIMARY KEY COMMENT '课程号，主键',
    cname VARCHAR(20) NOT NULL COMMENT '课程名称',
    Credit INT CHECK (Credit >= 0) COMMENT '学分，不能为负数',
    Cpno CHAR(3) COMMENT '先修课程编号',
    -- 外键约束：Cpno参考course表的cno
    CONSTRAINT fk_course_cpno FOREIGN KEY (Cpno) REFERENCES course(cno)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='课程表';

-- 创建sc表（选修表）
CREATE TABLE IF NOT EXISTS sc (
    sno CHAR(8) COMMENT '学号',
    cno CHAR(3) COMMENT '课程号',
    Grade INT CHECK (Grade >= 0 AND Grade <= 100) COMMENT '成绩，0-100分',
    -- 复合主键
    PRIMARY KEY (sno, cno),
    -- 外键约束：sno参考student表的sno
    CONSTRAINT fk_sc_sno FOREIGN KEY (sno) REFERENCES student(sno) 
        ON DELETE CASCADE ON UPDATE CASCADE,
    -- 外键约束：cno参考course表的cno
    CONSTRAINT fk_sc_cno FOREIGN KEY (cno) REFERENCES course(cno)
        ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='选修表';
~~~

# 语句解析
数据库创建：首先创建 School 数据库并使用它
student 表：
sno作为主键
ssex添加 CHECK 约束，限制只能是 ' 男' 或 ' 女'
sage添加 CHECK 约束，限制年龄范围
sname设置为 NOT NULL
course 表：
cno作为主键
Cpno设置为外键，自引用 course 表的cno（因为先修课也是课程）
Credit添加 CHECK 约束，确保学分非负
cname设置为 NOT NULL
sc 表：
使用sno和cno作为复合主键
分别设置外键关联 student 表和 course 表
Grade添加 CHECK 约束，限制成绩在 0-100 之间
设置外键的级联操作（ON DELETE CASCADE, ON UPDATE CASCADE）
测试数据插入语句
~~~sql
-- 使用School数据库
USE School;

-- 1. 插入student表数据（严格按照Sno, Sname, Sex, Sage, Sdept顺序）
INSERT INTO student (sno, sname, ssex, sage, sdept) 
VALUES 
('08001', '张力', '男', 18, 'cs'),
('08002', '李丽', '女', 19, 'is'),
('08003', '赵海', '男', 20, 'ma'),
('08004', '张那', '女', 17, 'cs'),
('08005', '刘晨', '男', 18, 'is'),
('08006', '刘丹丹', '女', 17, 'ma'),
('08007', '刘立', '男', 21, 'cs'),
('08008', '王江', '男', 19, 'cs'),
('08009', '高晓', '男', 20, 'is'),
('08010', '张丽', '女', 19, 'cs');

-- 2. 插入course表数据（注意Cpno为空的情况）
INSERT INTO course (cno, cname, Cpno, Credit) 
VALUES 
('001', '数据库', '005', 4),
('002', '高等数学', NULL, 2),
('003', '信息系统', '001', 4),
('004', '操作系统', '006', 3),
('005', '数据结构', '007', 4),
('006', '数据处理', NULL, 2),
('007', 'C语言', '006', 4);

-- 3. 插入sc表数据（注意Grade为空的情况）
INSERT INTO sc (sno, cno, Grade) 
VALUES 
('08001', '002', 100),
('08001', '003', 95),
('08001', '004', 90),
('08001', '006', 100),
('08002', '002', 98),
('08002', '003', NULL),
('08003', '001', 99),
('08003', '002', 80),
('08003', '003', 98),
('08004', '001', 90),
('08005', '007', 97),
('08005', '002', 37),
('08006', '003', NULL),
('08008', '001', 50),
('08008', '003', 80),
('08009', '001', 89),
('08009', '004', 90),
('08010', '005', 100);
~~~

### 实验过程
本次实验围绕MySQL数据库环境熟悉展开，首先完成MySQL的安装配置，通过图形化工具创建School数据库，接着按要求设计student、course、sc三张表结构（含主键、外键约束），最后插入指定测试数据，验证数据完整性规则并观察结果。

### 实验详细操作步骤或程序清单
1. **MySQL环境准备**：参照官方文档完成MySQL安装，配置环境变量并启动服务，设置root用户密码。
2. **图形化工具操作**：打开Navicat（或SQLyog），新建连接并登录MySQL服务器。
3. **创建数据库**：在图形化工具中执行`CREATE DATABASE School;`，选中School数据库进入操作界面。
4. **创建数据表**：
   - 执行建表SQL（省略）创建student、course、sc表，设置主键（student.sno、course.cno、sc复合主键）和外键（sc.sno关联student.sno、sc.cno关联course.cno、course.Cpno关联course.cno）。
5. **插入数据**：
   - 执行数据插入SQL（省略），按指定顺序向student表插入数据，注意sage和sdept顺序；向course和sc表插入数据，处理空值（如Cpno、Grade为NULL的情况）。
6. **验证数据**：执行查询语句（如`SELECT * FROM student;`）检查数据插入结果。

### 疑难小结
1. **外键约束冲突**：插入sc表数据时，若先插入选课记录再插入学生/课程数据，会触发外键约束报错，需按“主表→从表”顺序插入数据。
2. **字段顺序错误**：向student表插入数据时，若sage和sdept顺序颠倒，会导致数据类型不匹配报错，需严格按表结构字段顺序插入。
3. **空值处理问题**：course表Cpno和sc表Grade的空值需用`NULL`表示，直接留空会触发语法错误，需注意SQL语法规范。

### 实验结果
1. 成功创建School数据库及三张数据表，表结构符合设计要求，主键、外键约束生效。
2. 测试数据完整插入各表，无完整性冲突错误，查询结果与指定数据一致。
3. 通过实验验证了实体完整性（主键非空唯一）、参照完整性（外键关联有效）和用户自定义完整性（如性别、成绩范围约束）的作用。